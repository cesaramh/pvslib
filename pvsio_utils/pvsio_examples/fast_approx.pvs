fast_approx : THEORY
BEGIN

  IMPORTING pi_3,
  	    fast_approx@fast_approx_io,
  	    double_approx

  main : void =
    with_mutable[nat,void](PRECISION,20,
      printf("Fast Approximations (Precision: ~a)~%",val(PRECISION)) &
      LET r : real = 3,
          sqrt_x = sqrt(r),
          sin_x  = sin(pi_3),
          cos_x  = cos(pi_3),
    	  tan_x  = tan(pi_3) IN
        printf("  sqrt(~a) ≅ ~f ≅ ~a~%",{| r, pp_rat(rational(sqrt_x)), sqrt_x |}) &
        printf("  π ≅ ~f ≅ ~a~%",{| pp_rat(rational(pi)), pi |}) &
        printf("  sin(π/3) ≅ ~f ≅ ~a~%",{| pp_rat(rational(sin_x)), sin_x |}) &
        printf("  cos(π/3) ≅ ~f ≅ ~a~%",{| pp_rat(rational(cos_x)), cos_x |}) &
        printf("  tan(π/3) ≅ ~f ≅ ~a~%",{| pp_rat(rational(tan_x)), tan_x |}))

END fast_approx
